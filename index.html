<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Education Worldwide</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>

  <link rel="stylesheet" type="text/css" href="css/styles.css">
  <style>
    .scatter-plot-section {
      display: flex;
      flex-wrap: wrap;
      align-items: flex-start;
      margin-top: 40px;
    }

    .scatter-plot-text {
      flex: 1;
      padding-right: 20px;
      min-width: 300px;
    }

    .scatter-plot-container {
      flex: 2;
      min-width: 600px;
    }

    .radar-chart-section {
      margin-top: 40px;
    }
  </style>
</head>
<body>

  <!-- Dashboard Header -->
  <header>
    <h1>Education Around the World</h1>
    <p>Explore Global Education Trends</p>
  </header>

  <!-- Dashboard Div -->
  <div id="dashboard" class="dashboard-container">

    <!-- Section for Literacy Text -->
    <div class="literacy-text" style="padding-right: 20px;">
      <h2>Global Literacy Rates</h2>
      <p>
        Literacy is a cornerstone of education, enabling individuals to read, write, and communicate effectively, which is vital for learning, personal growth, and participation in society. It serves as a key indicator for educational quality and development, often used by governments and organizations to measure the success of education systems and policies. <strong>High literacy rates</strong> are linked to stronger economies and better job opportunities, while <strong>low rates</strong> highlight areas needing improved access to education.
      </p>
    </div>

    <!-- Section for Map -->
    <div id="symbol_map" class="chart-container"></div>

    <!-- Section for Government Expenditure Text -->
    <div class="expenditure-text" style="padding-right: 20px; margin-top: 40px;">
      <h2>Government Expenditure on Education</h2>
      <p>
        Government expenditure on education is a critical indicator of a nation's commitment to fostering a well-educated and skilled population. Education spending influences the quality of schools, availability of resources, and access to education, especially in underserved regions. By analyzing the <strong>mean government expenditure</strong> across countries over time, we can observe global trends and shifts in priorities, especially in the years following significant global events or policy changes. This visualization highlights the average investment in education since 2000, offering insights into how different countries prioritize education as a tool for economic and social growth.
      </p>
    </div>

    <!-- Section for Charts -->
    <div class="expenditure-charts" id="expenditure-charts">
      <!-- Line chart for mean government expenditure -->
      <div id="expenditure_line_chart" class="chart-container"></div>

      <!-- Top and Bottom 5 Countries Charts -->
      <div id="top_5_countries" class="chart-container"></div>
      <div id="bottom_5_countries" class="chart-container"></div>
    </div>

    <!-- Scatter Plot Section (below map and line charts) -->
    <div class="scatter-plot-section">
      <!-- Scatter Plot Text -->
      <div class="scatter-plot-text">
        <h2>Does Gender Matter?</h2>
        <p>
          Youth literacy rates vary significantly across different <strong>regions</strong> of the world. Some areas, particularly in <strong>Europe</strong> and <strong>East Asia</strong>, demonstrate near equality between young male and female literacy rates. On the other hand, regions like <strong>Africa</strong> and parts of <strong>South Asia</strong> continue to face challenges in balancing literacy rates between genders. 
          <br><br>
          This scatter plot offers a glimpse into the global picture of youth literacy, highlighting key areas where progress has been made and where more work is needed to ensure <strong>gender equality</strong> in education. The size of each point represents the population, emphasizing how literacy rates can differ in countries of varying sizes.
        </p>
      </div>

      <!-- Scatter Plot Container -->
      <div class="scatter-plot-container">
        <div id="scatter-plot" class="chart-container"></div>
      </div>
    </div>

    <!-- Radar Chart Section -->
    <div class="radar-chart-section">
      <h2>Country-Specific Education Insights</h2>
      <div id="radar-chart" class="chart-container"></div>
    </div>

  </div>

  <!-- Footer Section -->
  <footer style="margin-top: 50px; padding: 20px; background-color: #f0f0f0; text-align: center;">
    <p><strong>Data Sources:</strong> <a href="https://data.worldbank.org/topic/education" target="_blank">World Bank Education Data</a> and <a href="https://ourworldindata.org/literacy" target="_blank">Our World in Data Literacy</a></p>
    <p><strong>Author:</strong> Mario Sherman Tjokrosaputra</p>
    <p><small>&copy; 2024 Education Data Dashboard</small></p>
  </footer>

  <script type="text/javascript">
    // Embed the map with country selection
    vegaEmbed('#symbol_map', "js/cloroplethMap.json").then(function(result) {
      // Listen for country selection on the map
      result.view.addSignalListener('countrySelection', function(name, value) {
        if (value) {
          console.log("Selected Country: ", value);  // For debugging
          updateRadarChart(value);  // Update radar chart with selected country
        }
      });
    }).catch(console.error);

    // Function to update the radar chart based on selected country
    function updateRadarChart(selectedCountry) {
      vegaEmbed('#radar-chart', 'js/chart3.json', {
        config: {
          signals: [
            {
              name: 'selected_country',  // This signal name must match the one in the radar chart spec (chart3.json)
              value: selectedCountry
            }
          ]
        }
      }).catch(console.error);
    }

    // Initial Radar Chart load with default country
    updateRadarChart("Afghanistan");

    // Line chart for mean government expenditure
    vegaEmbed('#expenditure_line_chart', "js/expenditureLineChart.json").then(function(result) {
    }).catch(console.error);

    // Bar chart for top 5 countries by mean expenditure
    vegaEmbed('#top_5_countries', "js/top5ExpenditureBarChart.json").then(function(result) {
    }).catch(console.error);

    // Bar chart for bottom 5 countries by mean expenditure
    vegaEmbed('#bottom_5_countries', "js/bottom5ExpenditureBarChart.json").then(function(result) {
    }).catch(console.error);

    // Embed the scatter plot (#scatter-plot)
    vegaEmbed('#scatter-plot', "js/scatterPlot.json").then(function(result) {
    }).catch(console.error);

    // Embed the scatter plot (#scatter-plot)
    vegaEmbed('#chart3', "js/chart3.json").then(function(result) {
    }).catch(console.error);

  </script>

</body>
</html>
